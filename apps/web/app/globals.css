@tailwind base;
@tailwind components;
@tailwind utilities;

/* Cipher Noir Base Styles */
@layer base {
  :root {
    --color-background: 13 13 13; /* surface-base */
    --color-foreground: 255 255 255; /* text-primary */
    --color-primary: 0 245 212; /* cipher-500 */
    --color-secondary: 16 185 129; /* proof-500 */
    --color-accent: 59 130 246; /* info-default */
  }

  html {
    color-scheme: dark;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-surface-base text-text-primary font-sans antialiased;
    min-height: 100vh;
  }

  /* Custom selection colors */
  ::selection {
    @apply bg-cipher-500/30 text-text-primary;
  }

  /* Smooth scrollbar for dark theme */
  ::-webkit-scrollbar {
    @apply w-2;
  }

  ::-webkit-scrollbar-track {
    @apply bg-surface-sunken;
  }

  ::-webkit-scrollbar-thumb {
    @apply bg-border-strong rounded-full;
  }

  ::-webkit-scrollbar-thumb:hover {
    @apply bg-cipher-500;
  }
}

@layer components {
  /* Privacy Glass Card Effect */
  .glass-card {
    @apply relative overflow-hidden rounded-xl
           bg-surface-elevated/80 backdrop-blur-md
           border border-border-default
           shadow-lg;
  }

  .glass-card::before {
    content: "";
    @apply absolute inset-0 -z-10
           bg-gradient-to-br from-cipher-500/5 via-transparent to-proof-500/5;
  }

  /* Privacy Button Styles */
  .btn-privacy {
    @apply inline-flex items-center justify-center gap-2
           px-6 py-3 rounded-lg font-medium
           bg-gradient-to-r from-cipher-500 to-cipher-600
           text-text-inverse
           shadow-lg
           transition-all duration-300
           hover:shadow-xl hover:scale-105
           active:scale-95
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  .btn-privacy-outline {
    @apply inline-flex items-center justify-center gap-2
           px-6 py-3 rounded-lg font-medium
           border-2 border-cipher-500
           text-cipher-500
           transition-all duration-300
           hover:bg-cipher-500 hover:text-text-inverse
           active:scale-95
           disabled:opacity-50 disabled:cursor-not-allowed;
  }

  /* ZK Proof Status Indicator */
  .zk-status {
    @apply inline-flex items-center gap-2 px-3 py-1.5 rounded-full
           text-sm font-medium;
  }

  .zk-status-pending {
    @apply zk-status bg-warning-default/20 text-warning-default;
  }

  .zk-status-generating {
    @apply zk-status bg-cipher-500/20 text-cipher-500 animate-pulse;
  }

  .zk-status-verified {
    @apply zk-status bg-proof-500/20 text-proof-500;
  }

  .zk-status-failed {
    @apply zk-status bg-error-default/20 text-error-default;
  }

  /* Input Field Styles */
  .input-privacy {
    @apply w-full px-4 py-3 rounded-lg
           bg-surface-sunken/50 backdrop-blur-sm
           border border-border-default
           text-text-primary placeholder-text-tertiary
           transition-all duration-200
           focus:outline-none focus:border-cipher-500 focus:ring-2 focus:ring-cipher-500/20;
  }

  /* Amount Display */
  .amount-display {
    @apply font-display text-4xl font-bold
           bg-gradient-to-r from-cipher-500 via-cipher-400 to-proof-500
           bg-clip-text text-transparent;
  }

  /* Transaction Hash */
  .tx-hash {
    @apply font-mono text-sm text-text-tertiary
           bg-surface-sunken/50 px-3 py-1.5 rounded
           truncate max-w-xs;
  }
}

@layer utilities {
  /* ========================================
   * FOCUS VISIBLE STYLES (WCAG 2.4.7)
   * All interactive elements must have visible focus indicators
   * ======================================== */

  /* Base focus ring - cyan accent, high visibility */
  .focus-ring {
    @apply focus-visible:outline-none
           focus-visible:ring-2
           focus-visible:ring-cyan-400
           focus-visible:ring-offset-2
           focus-visible:ring-offset-neutral-900;
  }

  /* Focus ring inset - for elements where offset looks wrong */
  .focus-ring-inset {
    @apply focus-visible:outline-none
           focus-visible:ring-2
           focus-visible:ring-cyan-400
           focus-visible:ring-inset;
  }

  /* Focus ring with scale - for buttons */
  .focus-ring-scale {
    @apply focus-visible:outline-none
           focus-visible:ring-2
           focus-visible:ring-cyan-400
           focus-visible:ring-offset-2
           focus-visible:ring-offset-neutral-900
           focus-visible:scale-[1.02];
  }

  /* Global focus styles for native elements */
  *:focus-visible {
    outline: none;
  }

  /* Buttons - visible focus ring */
  button:focus-visible,
  [role="button"]:focus-visible {
    @apply ring-2 ring-cyan-400 ring-offset-2 ring-offset-neutral-900;
  }

  /* Links - underline + ring */
  a:focus-visible {
    @apply ring-2 ring-cyan-400 ring-offset-2 ring-offset-neutral-900 rounded;
  }

  /* Inputs and textareas */
  input:focus-visible,
  textarea:focus-visible,
  select:focus-visible {
    @apply ring-2 ring-cyan-400 border-cyan-400;
  }

  /* Checkboxes and radios */
  input[type="checkbox"]:focus-visible,
  input[type="radio"]:focus-visible {
    @apply ring-2 ring-cyan-400 ring-offset-2 ring-offset-neutral-900;
  }

  /* Tab panels and tablist items */
  [role="tab"]:focus-visible {
    @apply ring-2 ring-cyan-400 ring-offset-2 ring-offset-neutral-900 rounded-lg;
  }

  /* Menu items */
  [role="menuitem"]:focus-visible,
  [role="option"]:focus-visible {
    @apply bg-white/10 ring-2 ring-inset ring-cyan-400;
  }

  /* Cards and interactive containers */
  [role="listbox"]:focus-visible,
  [role="dialog"]:focus-visible {
    @apply ring-2 ring-cyan-400 ring-offset-2 ring-offset-neutral-900;
  }

  /* Text gradient utility */
  .text-gradient-privacy {
    @apply bg-gradient-to-r from-cipher-500 via-cipher-400 to-proof-500
           bg-clip-text text-transparent;
  }

  /* Animated border gradient */
  .border-gradient-animated {
    position: relative;
    background: linear-gradient(var(--color-background), var(--color-background)) padding-box,
                linear-gradient(135deg, 
                  rgb(129, 140, 248), 
                  rgb(167, 139, 250), 
                  rgb(34, 211, 238)) border-box;
    border: 2px solid transparent;
    border-radius: 0.75rem;
  }

  /* Hide scrollbar utility */
  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  /* ========================================
   * REDUCED MOTION SUPPORT (WCAG 2.3.3)
   * Respects user's OS-level motion preference
   * All animations/transitions disabled when reduced motion is preferred
   * ======================================== */

  /* Global reduced motion - disable ALL animations */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }

    /* Override specific animated elements */
    .animate-spin,
    .animate-pulse,
    .animate-bounce,
    .animate-ping,
    .animate-fade-in,
    .animate-fade-out,
    .animate-slide-up,
    .animate-slide-down,
    .animate-scale-in,
    .animate-scale-out,
    .animate-pulse-glow,
    .animate-zk-progress {
      animation: none !important;
    }

    /* Disable hover transforms */
    .hover\:scale-105:hover,
    .hover\:scale-110:hover,
    .hover\:-translate-y-1:hover {
      transform: none !important;
    }

    /* Keep essential state changes instant */
    .transition-colors,
    .transition-opacity {
      transition-duration: 0.01ms !important;
    }

    /* Remove glow effects that animate */
    .shadow-glow-subtle,
    .shadow-glow-blue,
    .shadow-glow-purple,
    .shadow-glow-cyan {
      animation: none !important;
    }

    /* Disable smooth scroll */
    html {
      scroll-behavior: auto !important;
    }

    /* ZK proof status - static states */
    .zk-status-generating {
      animation: none !important;
    }
  }

  /* Motion-safe utilities - only animate when motion is allowed */
  @media (prefers-reduced-motion: no-preference) {
    .motion-safe-animate {
      animation-play-state: running;
    }

    .motion-safe-transition {
      transition-duration: inherit;
    }
  }

  /* Motion-reduce utilities - static alternatives */
  @media (prefers-reduced-motion: reduce) {
    .motion-reduce-static {
      animation: none !important;
      transition: none !important;
    }

    .motion-reduce-opacity-100 {
      opacity: 1 !important;
    }

    .motion-reduce-visible {
      visibility: visible !important;
      opacity: 1 !important;
    }
  }

  /* Reduced motion alternative styles */
  .reduced-motion-fade-in {
    opacity: 1;
  }

  .reduced-motion-slide-up {
    transform: translateY(0);
  }

  .reduced-motion-scale-in {
    transform: scale(1);
  }

  /* ============================================
   * SHIMMER ANIMATION FOR SKELETON LOADING
   * ============================================ */

  /* Shimmer keyframes */
  @keyframes shimmer {
    0% {
      background-position: -200% 0;
    }
    100% {
      background-position: 200% 0;
    }
  }

  /* Base shimmer class */
  .animate-shimmer {
    position: relative;
    overflow: hidden;
    background: linear-gradient(
      90deg,
      theme('colors.neutral.800 / 50%') 0%,
      theme('colors.neutral.700 / 30%') 50%,
      theme('colors.neutral.800 / 50%') 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite linear;
  }

  /* Shimmer with glow effect */
  .animate-shimmer-glow {
    position: relative;
    overflow: hidden;
    background: linear-gradient(
      90deg,
      theme('colors.surface.elevated / 50%') 0%,
      theme('colors.cipher.500 / 10%') 50%,
      theme('colors.surface.elevated / 50%') 100%
    );
    background-size: 200% 100%;
    animation: shimmer 2s infinite linear;
  }

  /* Disable shimmer for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-shimmer,
    .animate-shimmer-glow {
      animation: none !important;
      background: theme('colors.neutral.800 / 50%') !important;
    }
  }

  /* ============================================
   * LOADING DOTS ANIMATION
   * ============================================ */

  @keyframes loading-dot {
    0%, 80%, 100% {
      transform: scale(0);
      opacity: 0.5;
    }
    40% {
      transform: scale(1);
      opacity: 1;
    }
  }

  .animate-loading-dot {
    animation: loading-dot 1.4s infinite ease-in-out both;
  }

  .animate-loading-dot-1 {
    animation-delay: -0.32s;
  }

  .animate-loading-dot-2 {
    animation-delay: -0.16s;
  }

  .animate-loading-dot-3 {
    animation-delay: 0s;
  }

  /* Disable loading dots for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-loading-dot {
      animation: none !important;
      transform: scale(1) !important;
      opacity: 1 !important;
    }
  }

  /* ============================================
   * PULSE LOADING ANIMATION
   * ============================================ */

  @keyframes pulse-loading {
    0%, 100% {
      opacity: 0.4;
    }
    50% {
      opacity: 0.8;
    }
  }

  .animate-pulse-loading {
    animation: pulse-loading 2s infinite ease-in-out;
  }

  /* Disable pulse for reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .animate-pulse-loading {
      animation: none !important;
      opacity: 0.6 !important;
    }
  }
}
